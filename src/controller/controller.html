<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-eval' 'unsafe-inline';" />
    <link rel="stylesheet" href="../../node_modules/bootstrap/dist/css/bootstrap.min.css" />
    <script src="import-jquery.js"></script>
    <script src="../../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../node_modules/sortablejs/Sortable.min.js"></script>
    <link href="./controller.css" rel="stylesheet" type="text/css" media="all" />
    <script src="./controller.js"></script>
    <title>FLLuid - Display Controller</title>
</head>

<body>
    <!-- Collapsible area for options -->
    <div class="accordion mx-4 my-2" id="optionsAccordion">
        <div class="accordion-item">
            <h2 class="accordion-header" id="optionsAccordionHeading">
                <button class="accordion-button collapsed fs-5" type="button" data-bs-toggle="collapse"
                    data-bs-target="#optionsAccordionContent" aria-expanded="false"
                    aria-controls="optionsAccordionContent">
                    <b>Configuration & Options</b>
                </button>
            </h2>

            <div id="optionsAccordionContent" class="accordion-collapse collapse"
                aria-labelledby="optionsAccordionHeading" data-bs-parent="#optionsAccordion">
                <div class="accordion-body">
                    <!-- Navigation tabs -->
                    <ul class="nav nav-tabs h5" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="text-primary nav-link active" id="this-event-tab" data-bs-toggle="tab"
                                data-bs-target="#this-event" type="button" role="tab" aria-controls="this-event"
                                aria-selected="true">This Event</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="text-primary nav-link" id="other-events-tab" data-bs-toggle="tab"
                                data-bs-target="#other-events" type="button" role="tab" aria-controls="other-events"
                                aria-selected="false">Other Events</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="text-primary nav-link" id="logos-tab" data-bs-toggle="tab"
                                data-bs-target="#logos" type="button" role="tab" aria-controls="logos"
                                aria-selected="false">Logos</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="text-primary nav-link" id="timer-tab" data-bs-toggle="tab"
                                data-bs-target="#timer" type="button" role="tab" aria-controls="timer"
                                aria-selected="false">Timer</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="text-primary nav-link" id="message-tab" data-bs-toggle="tab"
                                data-bs-target="#message" type="button" role="tab" aria-controls="message"
                                aria-selected="false">Message</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="text-primary nav-link" id="appearance-tab" data-bs-toggle="tab"
                                data-bs-target="#appearance" type="button" role="tab" aria-controls="appearance"
                                aria-selected="false">Appearance</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="text-primary nav-link" id="slides-tab" data-bs-toggle="tab"
                                data-bs-target="#slides" type="button" role="tab" aria-controls="appearance"
                                aria-selected="false">Slides</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="text-primary nav-link" id="display-tab" data-bs-toggle="tab"
                                data-bs-target="#display" type="button" role="tab" aria-controls="display"
                                aria-selected="false">Display</button>
                        </li>
                    </ul>

                    <!-- Navigation tab content sections -->
                    <div class="tab-content" id="myTabContent">

                        <!-- THIS EVENT tab content -->
                        <div class="tab-pane fade show active" id="this-event" role="tabpanel"
                            aria-labelledby="this-event-tab">
                            <div class="mb-3"></div>
                            <div class="row">
                                <div class="col-auto mx-auto mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">Event ID:</span>
                                        <input type="text" class="form-control" id="this-tournament-id">
                                        <button class="btn btn-primary" id="save-this-tournament-id">Save</button>
                                    </div>
                                </div>
                                <div class="col-auto mx-auto mb-3">
                                    <select class="form-select mb-1" id="select-this-match-type">
                                        <option value="practice">Practice Matches</option>
                                        <option value="competition" selected>Comp. Matches</option>
                                    </select>
                                </div>
                                <div class="col-auto mx-auto mb-3">
                                    <button class="btn btn-outline-secondary w-100" id="refresh-this-event">
                                        Refresh scores
                                    </button>
                                </div>
                                <!-- <div class="col-2 col-lg-0"></div> -->
                                <div class="col-auto mx-auto mb-3">
                                    <div class="input-group">
                                        <label for="schedule-csv-picker" class="input-group-text"
                                            data-bs-toggle="tooltip" data-bs-placement="bottom"
                                            title="FLLTournament schedule file exported to CSV">Schedule
                                            File:</label>
                                        <input type="file" class="form-control" id="schedule-csv-picker" accept=".csv">
                                    </div>
                                </div>
                                <!-- <div class="col-3 col-md-0"></div> -->
                            </div>

                        </div><!-- END of THIS EVENT tab content -->

                        <!-- OTHER EVENTS tab content -->
                        <div class="tab-pane fade" id="other-events" role="tabpanel" aria-labelledby="other-events-tab">
                            <div class="mb-3"></div>
                            <div class="row">
                                <div class="col-auto mx-auto mb-3">
                                    <div class="input-group">
                                        <span id="other-event-id-label" class="input-group-text"
                                            data-bs-toggle="tooltip" data-bs-placement="bottom"
                                            title="Separate w/ commas">Event IDs:</span>
                                        <input type="text" class="form-control" id="other-tournament-ids">
                                        <button class="btn btn-primary" id="save-other-tournament-ids">Save</button>
                                    </div>
                                </div>
                                <div class="col-auto mx-auto mb-3">
                                    <select class="form-select mb-1" id="select-other-match-type">
                                        <option value="practice">Practice Matches</option>
                                        <option value="competition" selected>Comp. Matches</option>
                                    </select>
                                </div>
                                <div class="col-auto mx-auto mb-3">
                                    <button class="btn btn-outline-secondary w-100" id="refresh-other-events">
                                        Refresh scores
                                    </button>
                                </div>
                            </div>
                        </div><!-- END of OTHER EVENTs tab content -->

                        <!-- LOGOS tab content -->
                        <div class="tab-pane fade" id="logos" role="tabpanel" aria-labelledby="logos-tab">
                            <div class="mb-3"></div>
                            <div class="row">
                                <div class="col-auto mx-auto mb-3">
                                    <div class="input-group">
                                        <label for="logo-dir-picker" class="input-group-text">Logo Directory:</label>
                                        <input type="file" class="form-control" id="logo-dir-picker" webkitdirectory>
                                    </div>
                                </div>
                                <div class="col-auto mx-auto mb-3">
                                    <div class="card" id="logo-ordering-card">
                                        <h4 class="card-header">Select Logo Order</h4>
                                        <div class="card-body" id="logo-ordering"></div>
                                    </div>
                                </div>
                            </div>


                        </div> <!-- END of LOGOS tab content -->

                        <!-- TIMER tab content -->
                        <div class="tab-pane fade" id="timer" role="tabpanel" aria-labelledby="timer-tab">
                            <div class="mb-3"></div>
                            <div class="row">
                                <div class="col-auto mb-3 mx-auto">
                                    <div class="input-group w-100">
                                        <span class="input-group-text fw-bold">Font:</span>
                                        <select id="select-font" class="form-select">
                                            <option value="default">System Default</option>
                                            <option value="bricks">Bricks</option>
                                            <option value="ubuntu-mono-bold">Ubuntu Mono Bold</option>
                                            <option value="digital-7-mono">Seven-Segment</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-auto mb-3 mx-auto">
                                    <div class="input-group">
                                        <span class="input-group-text fw-bold">Sounds:</span>
                                        <span class="input-group-text">
                                            <input class="form-check-input mt-0" type="checkbox" id="start-sound"
                                                checked>
                                            <label for="start-sound">&nbsp;Start</label>
                                        </span>
                                        <span class="input-group-text">
                                            <input class="form-check-input mt-0" type="checkbox" id="30-second-warning"
                                                checked>
                                            <label for="30-second-warning">&nbsp;0:30</label>
                                        </span>
                                        <span class="input-group-text">
                                            <input class="form-check-input mt-0" type="checkbox" id="end-sound" checked>
                                            <label for="end-sound">&nbsp;End</label>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-auto mb-3 mx-auto">
                                    <div class="input-group">
                                        <span class="input-group-text" data-bs-toggle="tooltip"
                                            data-bs-placement="bottom"
                                            title="Automatically advance the match block 5 seconds after the timer ends">
                                            <input class="form-check-input mt-0" type="checkbox" id="auto-advance">
                                            <label for="auto-advance">
                                                &nbsp;Auto-advance match block
                                            </label>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-auto mx-auto mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text" data-bs-toggle="tooltip"
                                            data-bs-placement="bottom"
                                            title="Display the teams in the current match block on the chroma key timer">
                                            <input type="checkbox" id="chroma-key-timer-teams"
                                                class="form-check-input mt-0">
                                            <label for="chroma-key-timer-teams">&nbsp;Show teams on chroma timer</label>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- END of TIMER tab content -->

                        <!-- MESSAGE tab content -->
                        <div class="tab-pane fade" id="message" role="tabpanel" aria-labelledby="message-tab">
                            <div class="mb-3"></div>
                            <div class="row">
                                <div class="col-auto mx-auto mb-3">
                                    <!-- <div class="card">
                                          <h4 class="card-header">Message Text</h4>
                                          <div class="card-body">
                                              <textarea rows="3" style="width:400px;" id="message-text-area"></textarea>
                                              <div class="row px-3">
                                                  <button class="col-12 mb-3 btn btn-success" id="submit-message-text">Submit</button>
                                              </div>
                                          </div>
                                      </div> -->
                                    <div class="input-group">
                                        <span class="input-group-text fw-bold">Message:</span>
                                        <input type="text" class="form-control" id="message-text-area">
                                        <button class="btn btn-success" id="submit-message-text">Submit</button>
                                    </div>
                                </div>
                                <div class="col-auto mx-auto mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">
                                            <input type="checkbox" id="msg-on-other-screens"
                                                class="form-check-input mt-0">
                                            <label for="msg-on-other-screens">&nbsp;Show message on other
                                                displays</label>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- END of MESSAGE tab content -->

                        <!-- APPEARANCE tab content -->
                        <div class="tab-pane fade" id="appearance" role="tabpanel" aria-labelledby="appearance-tab">
                            <div class="mb-3"></div>
                            <div class="row">
                                <div class="col-auto mx-auto mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">
                                            <input type="checkbox" class="form-check-input mt-0" id="chroma-key">
                                            <label for="chroma-key">&nbsp;Chroma Key Mode</label>
                                        </span>
                                        <span class="input-group-text">
                                            <label for="chroma-color-picker">Background Color:&nbsp;</label>
                                            <input type="color" class="form-control form-control-color"
                                                id="chroma-color-picker" value="#00ff00" style="width: 2.5em;">
                                        </span>
                                    </div>
                                </div>
                                <div class="col-auto mx-auto mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">Table Scroll Speed:</span>
                                        <input type="range" class="form-control" id="table-scroll-speed" step="5"
                                            min="20" max="120" value="70">
                                        <span class="input-group-text">
                                            <span id="table-scroll-speed-current-value">70</span>
                                            &nbsp;px/sec
                                        </span>
                                    </div>
                                </div>
                                <div class="col-auto mx-auto mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">Sponsor Image Time:</span>
                                        <input type="range" class="form-control" id="logo-time" min="2" max="15"
                                            value="5">
                                        <span class="input-group-text">
                                            <span id="logo-time-current-value">5</span>
                                            &nbsp;seconds
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- END of APPEARANCE tab content -->

                        <div class="tab-pane fade" id="slides" role="tabpanel" aria-labelledby="slides-tab">
                            <div class="row mt-3">
                                <!-- add slide -->
                                <div class="col-auto mx-auto">
                                    <div class="card">
                                        <div class="card-header">Add Slide</div>
                                        <div class="card-body">
                                            <div class="btn-group mb-3" role="group">
                                                <span class="input-group-text">Slide Type:</span>

                                                <input type="radio" class="btn-check" name="slide-type-radio" id="slide-type-speaker" autocomplete="off">
                                                <label class="btn btn-outline-primary" for="slide-type-speaker">Speaker</label>
                                              
                                                <input type="radio" class="btn-check" name="slide-type-radio" id="slide-type-award-intro" autocomplete="off">
                                                <label class="btn btn-outline-primary" for="slide-type-award-intro">Award Intro</label>
                                              
                                                <input type="radio" class="btn-check" name="slide-type-radio" id="slide-type-award-winner" autocomplete="off">
                                                <label class="btn btn-outline-primary" for="slide-type-award-winner">Award Winner</label>

                                                <input type="radio" class="btn-check" name="slide-type-radio" id="slide-type-text" autocomplete="off">
                                                <label class="btn btn-outline-primary" for="slide-type-text">Text</label>
                                            </div>
                                            <div class="card mb-3">
                                                <div class="card-header">Slide Content:</div>
                                                <div class="card-body" id="new-slide-content"></div>
                                            </div>
                                            <div class="container">
                                                <div class="text-center">
                                                    <button class="btn btn-success text-center w-50" id="add-slide">+ Add Slide</button>
                                                </div>
                                            </div>
                                            
                                        </div>
                                    </div>
                                </div>

                                <!-- slide ordering -->
                                <div class="col-auto mx-auto">
                                    <div class="card">
                                        <div class="card-header" data-bs-toggle="tooltip" data-bs-placement="top" title="Drag to rearrange">Slide Ordering</div>
                                        <div class="card-body" id="slide-order-area"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- DISPLAY tab content -->
                        <div class="tab-pane fade" id="display" role="tabpanel" aria-labelledby="display-tab">
                            <div class="row mt-2">
                                <div class="col-auto mx-auto">
                                    <div class="card mb-3">
                                        <div class="card-header">View Display In Browser</div>
                                        <div class="card-body">
                                            <div class="input-group mb-3">
                                                <span class="input-group-text">Display Select:</span>
                                                <select name="disp-select" id="disp-select" class="form-select">
                                                    <option value="display">Audience Display (controlled by this window)</option>
                                                    <option value="logos">Logos</option>
                                                    <option value="schedule">Match Schedule</option>
                                                    <option value="intro">Match Intro</option>
                                                    <option value="scores">Scores</option>
                                                    <option value="timer">Timer</option>
                                                    <option value="timer-chroma">Chroma Key Timer</option>
                                                    <option value="other-events">Other Events</option>
                                                    <option value="message">Message</option>
                                                </select>
                                            </div>

                                            <div class="input-group mb-3">
                                                <span class="input-group-text">This Computer:</span>
                                                <span class="input-group-text white flex-grow-1" id="localhost-addr">http://localhost:355</span>
                                                <button class="btn btn-success" id="copy-localhost">Copy</button>
                                            </div>
                                            <div class="input-group">
                                                <span class="input-group-text">Other Computers:</span>
                                                <span class="input-group-text white flex-grow-1" id="local-ip-addr"></span>
                                                <button class="btn btn-success" id="copy-ip">Copy</button>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="col-auto mx-auto">
                                    <button class="btn btn-primary" id="launch-disp-window">Launch Standalone Display Window</button>
                                </div>
                            </div>

                        </div>

                    </div> <!-- END of nav tab content sections-->

                </div>
            </div>
        </div>
    </div>

    <!-- Area for permenant controls -->
    <div class="row m-2">
        <div class="col-12 col-md-6">

            <!-- timer controls -->
            <div class="card mb-3">
                <div class="card-body">
                    <h2 class="text-center">Timer Controls</h2>

                    <div id="timer-display">2:30</div>

                    <div class="row px-3 timer-buttons">
                        <div class="col-12 col-sm-6 pr-sm-1 mb-3 mb-sm-0">
                            <button class="timer-button w-100 btn btn-success" id="timer-start-pause">
                                Start
                            </button>
                        </div>
                        <div class="col-12 col-sm-6 pl-sm-1">
                            <button class="timer-button w-100 btn btn-danger" id="timer-reset">
                                Reset
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- match block controls -->
            <div class="card mb-3">
                <div class="card-body">
                    <!-- Current match block picker -->
                    <h2 class="text-center">Current Match Block</h2>
                    <div class="current-match-block text-center" id="current-match-block"></div>
                    <div id="block-teams" class="m-2"></div>
                    <div class="row px-3">
                        <div class="col-12 col-sm-6 pr-sm-1 mb-3 mb-sm-0">
                            <button class="w-100 btn btn-primary" id="prev-block">
                                Prev. Block
                            </button>
                        </div>
                        <div class="col-12 col-sm-6 pl-sm-1">
                            <button class="w-100 btn btn-primary" id="next-block">
                                Next Block
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-md-6">
            <!-- Current Display -->
            <div class="card mb-3">
                <div class="card-body" id="screen-select">
                    <h2 class="text-center">Current Display</h2>

                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" name="current-display" value="none"
                            id="none-radio-button">
                        <label class="custom-control-label" for="none-radio-button">
                            <h4>None</h4>
                        </label>
                    </div>
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" name="current-display" value="logos"
                            id="logos-radio-button">
                        <label class="custom-control-label" for="logos-radio-button">
                            <h4>Logos</h4>
                        </label>
                    </div>
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" name="current-display" value="schedule"
                            id="schedule-radio-button">
                        <label class="custom-control-label" for="schedule-radio-button">
                            <h4>Match Schedule</h4>
                        </label>
                    </div>
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" name="current-display" value="intro"
                            id="intro-radio-button">
                        <label class="custom-control-label" for="intro-radio-button">
                            <h4>Match Intro</h4>
                        </label>
                    </div>
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" name="current-display" value="scores"
                            id="scores-radio-button">
                        <label class="custom-control-label" for="scores-radio-button">
                            <h4>Scores</h4>
                        </label>
                    </div>
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" name="current-display" value="timer"
                            id="timer-radio-button">
                        <label class="custom-control-label" for="timer-radio-button">
                            <h4>Timer</h4>
                        </label>
                    </div>
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" name="current-display" value="other-events"
                            id="other-events-radio-button">
                        <label class="custom-control-label" for="other-events-radio-button">
                            <h4>Other Events</h4>
                        </label>
                    </div>
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" name="current-display" value="message"
                            id="message-radio-button">
                        <label class="custom-control-label" for="message-radio-button">
                            <h4>Message</h4>
                        </label>
                    </div>

                </div>
            </div>

            <!-- Slide controls -->
            <div class="card mb-3">
                <div class="card-body">
                    <h2 class="text-center">Current Slide</h2>

                    <div id="curr-slide" class="card m-2"></div>

                    <div class="row px-3">
                        <div class="col-12 col-sm-6 pr-sm-1 mb-3 mb-sm-0">
                            <button class="w-100 btn btn-primary" id="prev-slide">
                                Prev. Slide
                            </button>
                        </div>
                        <div class="col-12 col-sm-6 pl-sm-1">
                            <button class="w-100 btn btn-primary" id="next-slide">
                                Next Slide
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>